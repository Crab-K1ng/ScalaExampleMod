plugins {
    id 'scala'
    id 'java'
    id "cr_puzzle_gradle"
    id "com.github.johnrengelman.shadow"
}

repositories {
    mavenCentral()
    maven {
        name "JitPack"
        url "https://jitpack.io"
    }
}

dependencies {
   mod("com.github.PuzzleLoader:puzzle-language-scala:1.0.1")
   compileOnly ("org.scala-lang:scala3-library_3:$scala_version")
   compileOnly ("org.scala-lang:scala-library:$scala_lib_version")
}
sourceSets {
    main {
        java {
            srcDirs = []
        }
        scala {
            srcDirs = ['src/main/scala', 'src/main/java']
        }
    }
}
processResources {
    // Locations of where to inject the properties
    def resourceTargets = [ "puzzle.mod.json" ]

    // Left item is the name in the target, right is the varuable name
    def replaceProperties = [
            "mod_version"     : version,
            "mod_desc"       : desc,
            "mod_name"        : project.name,
            "mod_id"          : id,
    ]


    inputs.properties replaceProperties
    replaceProperties.put "project", project
    filesMatching(resourceTargets) {
        expand replaceProperties
    }
}